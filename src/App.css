/* Root layout */
#root { 
  --bg: #0f1115;
  --panel: #181c23;
  --panel-alt: #1f252e;
  --border: #2a323d;
  --radius-sm: 6px;
  --radius: 14px;
  --radius-pill: 999px;
  --focus: 0 0 0 3px #233041,0 0 0 1px #4c89ff inset;
  --grad-accent: linear-gradient(135deg,#4c8dff,#8564ff 60%,#ff6994);
  --text: #e6e9ef;
  --text-dim: #9aa4b1;
  --danger: #ff4d61;
  --success: #3ddc97;
  --warn: #ffb347;
  color: var(--text);
  background: linear-gradient(135deg, #1a1f2e, #0f1419);
  min-height: 100vh;
  width: 100%;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif;
  padding: 2.5rem clamp(1rem,3vw,3rem) 4rem;
  box-sizing: border-box;
  display: flex;
  justify-content: center;
  align-items: flex-start;
}

* { box-sizing: border-box; }

body { 
  margin: 0; 
  width: 100%;
  background: linear-gradient(135deg, #1a1f2e, #0f1419);
  min-height: 100vh;
}

h1, h2, h3 { font-weight: 600; line-height: 1.15; }

a { color: #6ea8ff; text-decoration: none; }
a:hover { text-decoration: underline; }

/* Layout container */
.quiz-app { 
  max-width: 900px; 
  width: 100%;
  display: flex; 
  flex-direction: column; 
  gap: 2.2rem; 
}

/* Language switching */
.quiz-app.rtl {
  direction: rtl;
}
.quiz-app.ltr {
  direction: ltr;
}

.quiz-app.ltr .card h2,
.quiz-app.ltr .question-text,
.quiz-app.ltr .option-btn,
.quiz-app.ltr .feedback,
.quiz-app.ltr .reference,
.quiz-app.ltr .reference .quote {
  direction: ltr;
  text-align: left;
}

.quiz-app.ltr .option-index {
  order: 0;
}

.quiz-app.ltr .option-text {
  order: 1;
}

.language-switcher {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.language-select {
  background: var(--panel);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 0.4rem 0.6rem;
  border-radius: var(--radius-sm);
  font-size: 0.8rem;
  font-family: inherit;
}

.language-select:focus {
  outline: var(--focus);
}
.quiz-header { display:flex; flex-direction:column; gap:.75rem; }
.quiz-header h1 { font-size: clamp(1.9rem,3.6vw,3rem); background: var(--grad-accent); -webkit-background-clip: text; background-clip: text; color: transparent; margin: 0; }
.subtitle { color: var(--text-dim); font-size: .95rem; letter-spacing:.5px; }

/* Progress */
.progress-shell { background: #202832; border: 1px solid var(--border); border-radius: var(--radius-pill); height: 14px; overflow: hidden; position: relative; }
.progress-bar { height:100%; background: var(--grad-accent); width: 0; transition: width .5s cubic-bezier(.65,.05,.36,1); }
.progress-label { font-size: .75rem; margin-top:.35rem; color: var(--text-dim); letter-spacing:.5px; }

/* Card */
.card { background: linear-gradient(160deg,var(--panel),var(--panel-alt)); border:1px solid var(--border); border-radius: var(--radius); padding: clamp(1rem,2.3vw,2.2rem); position:relative; box-shadow: 0 8px 24px -8px rgba(0,0,0,.5),0 0 0 1px rgba(255,255,255,.015) inset; }
.card + .card { margin-top: 1.5rem; }
.card h2 { margin-top: 0; font-size: clamp(1.15rem,2.2vw,1.6rem); direction: rtl; text-align: right; }

/* Question text RTL support */
.question-text { direction: rtl; text-align: right; }

/* Options */
.options { list-style:none; padding:0; margin: 1.4rem 0 0; display:grid; gap:.9rem; }
.option-btn { --outline: transparent; position:relative; text-align:right; width:100%; border:1px solid var(--border); background: #1d232b; color: var(--text); font: inherit; padding: .95rem 1.1rem; border-radius: var(--radius-sm); cursor:pointer; display:flex; gap:.9rem; align-items:flex-start; line-height:1.25; transition: background .3s,border-color .3s, transform .15s; direction: rtl; }
.option-btn:hover { background:#252e39; border-color: #3a4756; }
.option-btn:active { transform: translateY(1px); }
.option-btn:focus-visible { outline: var(--focus); }
.option-btn.correct { border-color: var(--success); background: linear-gradient(135deg,#1d262b,#1e322a); }
.option-btn.incorrect { border-color: var(--danger); background: linear-gradient(135deg,#291d21,#2d1c20); }
.option-btn.disabled { cursor: default; opacity:.9; }
.option-index { font-weight:600; font-size:.8rem; opacity:.7; letter-spacing:.5px; padding:.35rem .55rem; border-radius: var(--radius-pill); background:#27313c; flex-shrink:0; margin-top:2px; order: 2; }
.option-btn.correct .option-index { background: var(--success); color:#0d1514; opacity:1; }
.option-btn.incorrect .option-index { background: var(--danger); color:#140d0e; opacity:1; }
.option-text { order: 1; }

/* Feedback */
.feedback { margin-top: 1.4rem; border-radius: var(--radius-sm); padding: .95rem 1rem 1.05rem; font-size: .9rem; line-height:1.35; background:#202a34; border:1px solid var(--border); position:relative; overflow:hidden; direction: rtl; text-align: right; }
.feedback.correct { border-color: var(--success); }
.feedback.incorrect { border-color: var(--danger); }
.feedback strong { font-weight:600; }
.reference { margin-top:.75rem; font-size:.78rem; color: var(--text-dim); display:flex; flex-direction:column; gap:.3rem; direction: rtl; text-align: right; }
.reference code { font-size:.72rem; background:#27313c; padding:.25rem .5rem; border-radius:4px; }
.reference .quote { font-style: italic; color: #b7c2cf; direction: rtl; text-align: right; }

/* Actions */
.actions { margin-top:1.8rem; display:flex; justify-content:space-between; gap:1rem; flex-wrap:wrap; }
.btn { --btn-bg:#2a3440; --btn-border: #3a4756; --btn-bg-hover:#31404f; --btn-shadow: 0 4px 12px -4px rgba(0,0,0,.5); font: inherit; background: var(--btn-bg); border:1px solid var(--btn-border); color: var(--text); padding:.85rem 1.35rem; border-radius: var(--radius-sm); cursor:pointer; font-weight:500; letter-spacing:.5px; display:inline-flex; align-items:center; gap:.55rem; transition: background .3s,border-color .3s, transform .18s, box-shadow .3s; box-shadow: var(--btn-shadow); }
.btn:hover { background: var(--btn-bg-hover); }
.btn:focus-visible { outline: var(--focus); }
.btn.primary { --btn-bg:#3556ff; --btn-border:#4364ff; --btn-bg-hover:#2950ff; color:#fff; box-shadow: 0 6px 16px -6px rgba(48,94,255,.55); }
.btn.danger { --btn-bg:#ff4d61; --btn-border:#ff4d61; --btn-bg-hover:#ff3b52; color:#fff; box-shadow:0 6px 16px -6px rgba(255,77,97,.6); }
.btn.outline { background: transparent; }
.btn[disabled] { opacity:.45; cursor: default; box-shadow:none; }

/* Config Screen */
.config-item {
  margin-top: 1.8rem;
  padding-top: 1.5rem;
  border-top: 1px solid var(--border);
}
.config-item:first-of-type {
  margin-top: 1.5rem;
  padding-top: 0;
  border-top: 0;
}
.config-item label {
  display: block;
  margin-bottom: 0.8rem;
  font-weight: 500;
  color: var(--text-dim);
}
.config-item strong {
  color: var(--text);
  font-weight: 600;
}
.config-description {
  font-size: 0.8rem;
  color: var(--text-dim);
  margin-top: 0.6rem;
  line-height: 1.4;
}

.slider {
  width: 100%;
  -webkit-appearance: none;
  appearance: none;
  height: 10px;
  background: #202832;
  border-radius: var(--radius-pill);
  outline: none;
  border: 1px solid var(--border);
}
.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 22px;
  height: 22px;
  background: #4c8dff;
  cursor: pointer;
  border-radius: 50%;
  border: 3px solid var(--panel);
  box-shadow: 0 0 0 1px #4c8dff;
}
.slider::-moz-range-thumb {
  width: 22px;
  height: 22px;
  background: #4c8dff;
  cursor: pointer;
  border-radius: 50%;
  border: 3px solid var(--panel);
  box-shadow: 0 0 0 1px #4c8dff;
}

.range-inputs {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 1rem;
  align-items: center;
}
.range-inputs::before {
  content: '';
  height: 2px;
  background: var(--border);
  display: block;
}
.range-inputs input[type="number"] {
  width: 80px;
  background: var(--panel);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 0.6rem 0.8rem;
  border-radius: var(--radius-sm);
  font-size: 1rem;
  text-align: center;
  -moz-appearance: textfield;
}
.range-inputs input[type="number"]::-webkit-outer-spin-button,
.range-inputs input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.toggle-switch {
  display: flex;
  align-items: center;
  cursor: pointer;
  gap: 0.8rem;
}
.toggle-switch .label-text {
  font-weight: 600;
  color: var(--text);
}
.toggle-switch input[type="checkbox"] {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
}
.switch {
  position: relative;
  display: inline-block;
  width: 44px;
  height: 24px;
  background-color: #2a323d;
  border-radius: var(--radius-pill);
  transition: background-color 0.3s;
}
.switch::before {
  content: "";
  position: absolute;
  left: 4px;
  top: 4px;
  width: 16px;
  height: 16px;
  background-color: white;
  border-radius: 50%;
  transition: transform 0.3s;
}
.toggle-switch input:checked + .switch {
  background-color: var(--success);
}
.toggle-switch input:checked + .switch::before {
  transform: translateX(20px);
}

/* Summary */
.summary-grid { display:grid; gap:1.2rem; margin-top:1.5rem; }
.summary-item { padding:1rem 1.15rem 1.05rem; border:1px solid var(--border); background:#1a2028; border-radius: var(--radius-sm); position:relative; }
.summary-item.correct { border-color: var(--success); }
.summary-item.incorrect { border-color: var(--danger); }
.summary-item h3 { margin:0 0 .4rem; font-size:1rem; }
.pill { display:inline-block; font-size:.65rem; letter-spacing:.5px; padding:.35rem .55rem; border-radius: var(--radius-pill); background:#27313c; color:var(--text-dim); text-transform:uppercase; font-weight:600; margin-right:.5rem; }
.pill.good { background: var(--success); color:#0d1514; }
.pill.bad { background: var(--danger); color:#140d0e; }

/* Transitions */
.fade-in { animation: fade .45s ease; }
@keyframes fade { from { opacity:0; transform: translateY(8px); } to { opacity:1; transform: translateY(0); } }

/* Responsive tweaks */
@media (max-width: 640px) {
  #root { padding: 1.75rem 1.1rem 3rem; }
  .actions { flex-direction:column; }
  .btn { width:100%; justify-content:center; }
}
